<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Functions</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<!-- begin in_header.html -->
<meta name="description" content="Worksheets for learning historical data analysis with R.">
<meta name="author" content="David Meza">
<link rel="shortcut icon" href="img/favicon.png">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-25121492-1', 'lincolnmullen.com');
  ga('send', 'pageview');
</script>
<!-- end in_header.html -->


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="libs/navigation-1.0/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<div class="fluid-row">
  <div class="col-sm-12">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand" href="./">Worksheets for Historical Data Analysis with R</a>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://davidmeza1.github.io/">David Meza</a></li>
        </ul>
      </div>
    </nav>
  </div>
</div>

<div class="fluid-row">
  <div class="col-sm-3">
    <div class="list-group">
      <a class="list-group-item" href="./">Home</a>
      <a class="list-group-item" href="familiar-with-r.html">Getting Familiar with R</a>
      <a class="list-group-item" href="data-structures.html">Data Structures</a>
      <a class="list-group-item" href="functions.html">Functions</a>
      <a class="list-group-item" href="ggplot2.html">Basics of ggplot2</a>
      <a class="list-group-item" href="data-manipulation.html">Data Manipulation</a>
      <a class="list-group-item" href="more-data-manipulation.html">More Data Manipulation</a>
    </div>
    <script>
      // manage active state of toc based on current page
    var href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href === "" || href === "index.html")
      href = "./";
    $('a.list-group-item[href="' + href + '"]').addClass('active');
    </script>
  </div>
  <div class="col-sm-9 content-body">
    <p>
      <a id="download-link" download class="btn btn-warning">
        Download this worksheet as a .Rmd
      </a>
    </p>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Functions</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#aims-of-this-worksheet">Aims of this worksheet</a></li>
<li><a href="#explanation-of-functions">Explanation of functions</a></li>
<li><a href="#function-calls">Function calls</a></li>
<li><a href="#function-definition">Function definition</a></li>
</ul>
</div>

<div id="aims-of-this-worksheet" class="section level2">
<h2>Aims of this worksheet</h2>
<p>After completing this worksheet you should be able to use functions and write your own.</p>
<p>You may find the chapter on <a href="http://adv-r.had.co.nz/Functions.html">functions</a> from Hadley Wickham’s <em><a href="http://adv-r.had.co.nz/">Advanced R</a></em> book helpful.</p>
</div>
<div id="explanation-of-functions" class="section level2">
<h2>Explanation of functions</h2>
<p>Functions are one of the most powerful pieces of R. A function is basically a way of taking input and producing output. For instance, we can take the numbers 1, 2, and 3 (the input) run them through the <code>sum()</code> function and produce 6 (the output).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>There are two reasons that is powerful. First, many functions in R are <em>pure</em>. That means that given the same inputs, they always produce the same outputs. When you add those numbers together, nothing will ever make you get a different answer than 6: not the packages that you’ve loaded, not the variables in the global environment, not the waxing and waning of the moon. That means that you can <em>reason</em> about pure functions, since their output is predictable and stable. Furthermore, it means that you can always substitute the output for the input plus the function (like a variable in algebra). For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)) &lt;<span class="st"> </span><span class="dv">10</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">sum</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))
x &lt;<span class="st"> </span><span class="dv">10</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>The second reason that this is powerful is that functions are thoughts. The function <code>sum()</code> instantiates the idea of summing up values. Functions are like legos. They are small and insignificant in themselves, but because of the way that they connect to each other, you can use a lot of small ideas to build up a big idea in a rigorous, stable way.</p>
</div>
<div id="function-calls" class="section level2">
<h2>Function calls</h2>
<p>A function call has two basic parts: the name of the function, and the arguments. The name of the function comes before the parentheses which marks a function call.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(<span class="kw">c</span>(<span class="st">&quot;First&quot;</span>, <span class="st">&quot;Second&quot;</span>, <span class="st">&quot;Third&quot;</span>), <span class="dt">collapse =</span> <span class="st">&quot; -&gt; &quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;First -&gt; Second -&gt; Third&quot;</code></pre>
<ol style="list-style-type: decimal">
<li>What function is being called above? What are the two arguments to the function? What do those arguments do?</li>
</ol>
</div>
<div id="function-definition" class="section level2">
<h2>Function definition</h2>
<p>A function definition has three parts: the name of the function (which is the same as the name of any variable), the arguments to the function, and the body of the function that does the work. Let’s define a basic function. It will be called <code>hello</code>; it will take a person’s name as an input, and it will produce the output “Hello, person’s name.”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hello &lt;-<span class="st"> </span>function(person) {
  <span class="kw">paste</span>(<span class="st">&quot;Hello,&quot;</span>, person)
}
<span class="kw">hello</span>(<span class="st">&quot;Your name here&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Hello, Your name here&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>What is the function name? What is the name of the single argument to the function? What is the body of the function and how is it delimited? What output does it produce?</li>
</ol>
<p>Let’s make a more complicated function. This one will take some arbitrary greeting as well as a person’s name, and greet that person using that name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">greet &lt;-<span class="st"> </span>function(person, <span class="dt">greeting =</span> <span class="st">&quot;Hello&quot;</span>) {
  <span class="kw">paste</span>(greeting, person)
}
<span class="kw">greet</span>(<span class="st">&quot;Your name here&quot;</span>, <span class="dt">greeting =</span> <span class="st">&quot;Howdy&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Howdy Your name here&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">greet</span>(<span class="st">&quot;Your name here&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Hello Your name here&quot;</code></pre>
<p>Notice that we made the <code>greeting =</code> argument have a default value. Now we can call it with an explicit value (e.g., “Howdy”) and the function will use that. Or we can not give any value to the <code>greeting =</code> argument, and the function will use “Hello” automatically.</p>
<ol start="3" style="list-style-type: decimal">
<li><p>Write a function that greets someone with an arbitrary greeting, as in the example above, but then adds an argument <code>pleasantry =</code> which lets you specify something pleasant to say to the person. Make sure the <code>pleasantry =</code> argument has a default value.</p></li>
<li><p>One common operation to perform on data is to take data with an arbitrary range (i.e., minimum and maximum value) and scale (or normalize) it so that it has a range of 0 to 1. For instance, if I have a vector <code>c(1, 6, 2)</code> that might be normalized to <code>c(0.0, 1.0, 0.2)</code>. The formula to do that transformation is</p></li>
</ol>
<p><span class="math display">\[z_i = {x_i - \min(x) \over \max(x) - \min(x)}\]</span></p>
<p>Below is the boilerplate for a function that does that kind of rescaling. Flesh out the function’s body so that the last line of this chunk returns <code>TRUE</code> (i.e., so that the rescaled input matches the expected output). You will need to use some base R functions that we have already explored such as <code>max()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rescale &lt;-<span class="st"> </span>function(x) {
  x
}

input &lt;-<span class="st"> </span><span class="kw">c</span>(-<span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">3</span>)
output &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.5625</span>, <span class="fl">0.4375</span>, <span class="fl">0.5000</span>, <span class="fl">1.0</span>, <span class="fl">0.5625</span>)

<span class="kw">all</span>(output ==<span class="st"> </span><span class="kw">rescale</span>(input))</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Can you rewrite that function as <code>rescale2</code> so that it maps the domain (the input) to an arbitrary range (the output)? In other words, can you scale the values to a range other than <code>0</code> and <code>1</code>?</li>
</ol>
</div>

<footer>
  <p>
    <small>
      These materials are &copy; 2016 <a href="http://davidmeza1.github.io">Lincoln Mullen</a>. Licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; margin-left: 5px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    </small>
  </p>
</footer>

  </div>
</div>

<script>
  $.each($("img"), function(i, v) {
    var img = $(v);
    img.wrap("<a href='" + img.attr("src") + "'>");
  })

  url = window.location.toString();
  if (url === "http://davidmeza1.github.io/worksheets/") {
    $("#download-link").remove();
  } else {
    $("#download-link").attr("href", url.replace('.html', '.Rmd'));
  }
</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
